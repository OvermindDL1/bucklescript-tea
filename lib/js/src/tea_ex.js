// Generated by ReScript, PLEASE EDIT WITH CARE
'use strict';

var Curry = require("rescript/lib/js/curry.js");
var Tea_sub = require("./tea_sub.js");
var Tea_task = require("./tea_task.js");
var Caml_option = require("rescript/lib/js/caml_option.js");
var Web_window_localstorage = require("./web_window_localstorage.js");

function render_event(keyOpt, msg) {
  var key = keyOpt !== undefined ? keyOpt : "";
  var enableCall = function (callbacks) {
    Curry._1(callbacks.on, {
          TAG: /* AddRenderMsg */0,
          _0: msg
        });
    return function (param) {
      return Curry._1(callbacks.on, {
                  TAG: /* RemoveRenderMsg */1,
                  _0: msg
                });
    };
  };
  return Tea_sub.registration(key, enableCall);
}

var length = /* Task */{
  _0: (function (cb) {
      var value = Web_window_localstorage.length(window);
      if (value !== undefined) {
        return Curry._1(cb, {
                    TAG: /* Ok */0,
                    _0: value
                  });
      } else {
        return Curry._1(cb, {
                    TAG: /* Error */1,
                    _0: "localStorage is not available"
                  });
      }
    })
};

var clear = /* Task */{
  _0: (function (cb) {
      var value = Web_window_localstorage.clear(window);
      if (value !== undefined) {
        return Curry._1(cb, {
                    TAG: /* Ok */0,
                    _0: Caml_option.valFromOption(value)
                  });
      } else {
        return Curry._1(cb, {
                    TAG: /* Error */1,
                    _0: "localStorage is not available"
                  });
      }
    })
};

function clearCmd(param) {
  return Tea_task.attemptOpt((function (param) {
                
              }), clear);
}

function key(idx) {
  return /* Task */{
          _0: (function (cb) {
              var value = Web_window_localstorage.key(window, idx);
              if (value !== undefined) {
                return Curry._1(cb, {
                            TAG: /* Ok */0,
                            _0: value
                          });
              } else {
                return Curry._1(cb, {
                            TAG: /* Error */1,
                            _0: "localStorage is not available"
                          });
              }
            })
        };
}

function getItem(key) {
  return /* Task */{
          _0: (function (cb) {
              var value = Web_window_localstorage.getItem(window, key);
              if (value !== undefined) {
                return Curry._1(cb, {
                            TAG: /* Ok */0,
                            _0: value
                          });
              } else {
                return Curry._1(cb, {
                            TAG: /* Error */1,
                            _0: "localStorage is not available"
                          });
              }
            })
        };
}

function removeItem(key) {
  return /* Task */{
          _0: (function (cb) {
              var value = Web_window_localstorage.removeItem(window, key);
              if (value !== undefined) {
                return Curry._1(cb, {
                            TAG: /* Ok */0,
                            _0: Caml_option.valFromOption(value)
                          });
              } else {
                return Curry._1(cb, {
                            TAG: /* Error */1,
                            _0: "localStorage is not available"
                          });
              }
            })
        };
}

function removeItemCmd(key) {
  return Tea_task.attemptOpt((function (param) {
                
              }), removeItem(key));
}

function setItem(key, value) {
  return /* Task */{
          _0: (function (cb) {
              var match = Web_window_localstorage.setItem(window, key, value);
              if (match !== undefined) {
                return Curry._1(cb, {
                            TAG: /* Ok */0,
                            _0: undefined
                          });
              } else {
                return Curry._1(cb, {
                            TAG: /* Error */1,
                            _0: "localStorage is not available"
                          });
              }
            })
        };
}

function setItemCmd(key, value) {
  return Tea_task.attemptOpt((function (param) {
                
              }), setItem(key, value));
}

var LocalStorage = {
  length: length,
  clear: clear,
  clearCmd: clearCmd,
  key: key,
  getItem: getItem,
  removeItem: removeItem,
  removeItemCmd: removeItemCmd,
  setItem: setItem,
  setItemCmd: setItemCmd
};

exports.render_event = render_event;
exports.LocalStorage = LocalStorage;
/* No side effect */
